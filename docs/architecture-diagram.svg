<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="900" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Memory Capsule - System Architecture
  </text>
  <text x="600" y="55" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#7f8c8d">
    Multimodal AI Memory Assistant for Dementia Care
  </text>
  
  <!-- Input Layer -->
  <g id="input-layer">
    <rect x="50" y="80" width="1100" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="5"/>
    <text x="600" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">INPUT LAYER</text>
    
    <!-- Input Types -->
    <rect x="100" y="115" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="175" y="137" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">Voice Input</text>
    
    <rect x="300" y="115" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="375" y="137" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">Images</text>
    
    <rect x="500" y="115" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="575" y="137" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">Text Input</text>
    
    <rect x="700" y="115" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="775" y="137" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">Questions</text>
    
    <rect x="900" y="115" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="975" y="137" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">Reminders</text>
  </g>
  
  <!-- Processing Layer -->
  <g id="processing-layer">
    <rect x="50" y="180" width="1100" height="100" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5"/>
    <text x="600" y="205" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1565c0">PROCESSING AND EMBEDDING LAYER</text>
    
    <!-- Processing Components -->
    <rect x="100" y="220" width="200" height="45" fill="#ffffff" stroke="#2196f3" stroke-width="1" rx="3"/>
    <text x="200" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Whisper ASR</text>
    <text x="200" y="253" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Audio to Text</text>
    
    <rect x="350" y="220" width="200" height="45" fill="#ffffff" stroke="#2196f3" stroke-width="1" rx="3"/>
    <text x="450" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">NVIDIA Vision</text>
    <text x="450" y="253" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Image to Description</text>
    
    <rect x="600" y="220" width="250" height="45" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="3"/>
    <text x="725" y="238" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Sentence Transformer</text>
    <text x="725" y="253" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Text to Embeddings (384D)</text>
    
    <rect x="900" y="220" width="200" height="45" fill="#ffffff" stroke="#2196f3" stroke-width="1" rx="3"/>
    <text x="1000" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">NLP Parser</text>
    <text x="1000" y="253" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Extract Intent and Time</text>
  </g>
  
  <!-- Central Agent -->
  <g id="central-agent">
    <rect x="250" y="300" width="700" height="80" fill="#f3e5f5" stroke="#9c27b0" stroke-width="3" rx="5"/>
    <text x="600" y="325" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#6a1b9a">NEMO MEMORY AGENT</text>
    <text x="600" y="345" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">Orchestrator and Router</text>
    
    <!-- Agent Functions -->
    <text x="400" y="365" font-family="Arial, sans-serif" font-size="10" fill="#666">• Input Classification</text>
    <text x="550" y="365" font-family="Arial, sans-serif" font-size="10" fill="#666">• Tool Routing</text>
    <text x="700" y="365" font-family="Arial, sans-serif" font-size="10" fill="#666">• Context Building</text>
    <text x="850" y="365" font-family="Arial, sans-serif" font-size="10" fill="#666">• Response Gen</text>
  </g>
  
  <!-- Tool Layer -->
  <g id="tool-layer">
    <rect x="50" y="400" width="1100" height="80" fill="#fff8e1" stroke="#ffc107" stroke-width="2" rx="5"/>
    <text x="600" y="425" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#f57c00">TOOL LAYER</text>
    
    <!-- Tools -->
    <rect x="100" y="435" width="180" height="35" fill="#ffffff" stroke="#ffc107" stroke-width="1" rx="3"/>
    <text x="190" y="457" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Memory Tool</text>
    
    <rect x="320" y="435" width="180" height="35" fill="#ffffff" stroke="#ffc107" stroke-width="1" rx="3"/>
    <text x="410" y="457" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">ASR Tool</text>
    
    <rect x="540" y="435" width="180" height="35" fill="#ffffff" stroke="#ffc107" stroke-width="1" rx="3"/>
    <text x="630" y="457" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">QA Tool (Hybrid Search)</text>
    
    <rect x="760" y="435" width="180" height="35" fill="#ffffff" stroke="#ffc107" stroke-width="1" rx="3"/>
    <text x="850" y="457" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Reminder Tool</text>
    
    <rect x="980" y="435" width="180" height="35" fill="#ffffff" stroke="#ffc107" stroke-width="1" rx="3"/>
    <text x="1070" y="457" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Search Tool</text>
  </g>
  
  <!-- Vector Storage Layer -->
  <g id="vector-storage">
    <rect x="50" y="500" width="1100" height="220" fill="#ffebee" stroke="#f44336" stroke-width="3" rx="5"/>
    <text x="600" y="525" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#c62828">VECTOR STORAGE LAYER </text>
    
    <!-- VectorMemoryManager -->
    <rect x="100" y="540" width="400" height="160" fill="#ffffff" stroke="#d32f2f" stroke-width="2" rx="3"/>
    <text x="300" y="560" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#c62828">VectorMemoryManager</text>
    
    <!-- Components -->
    <rect x="120" y="575" width="160" height="50" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1" rx="3"/>
    <text x="200" y="595" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">Embedding Generator</text>
    <text x="200" y="610" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">all-MiniLM-L6-v2</text>
    
    <rect x="300" y="575" width="180" height="50" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1" rx="3"/>
    <text x="390" y="595" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">Search Methods</text>
    <text x="390" y="610" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">Vector | Hybrid | Metadata</text>
    
    <rect x="120" y="635" width="360" height="50" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1" rx="3"/>
    <text x="300" y="655" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">Index Manager</text>
    <text x="300" y="670" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">Add | Update | Delete | Rebuild</text>
    
    <!-- FAISS Index -->
    <rect x="550" y="540" width="250" height="160" fill="#e1f5fe" stroke="#0288d1" stroke-width="2" rx="3"/>
    <text x="675" y="560" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#01579b">FAISS Index</text>
    <text x="675" y="580" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Vector Storage (384D)</text>
    
    <!-- FAISS Details -->
    <text x="570" y="605" font-family="Arial, sans-serif" font-size="10" fill="#333">• IndexFlatIP (Inner Product)</text>
    <text x="570" y="625" font-family="Arial, sans-serif" font-size="10" fill="#333">• Normalized Embeddings</text>
    <text x="570" y="645" font-family="Arial, sans-serif" font-size="10" fill="#333">• Fast Similarity Search</text>
    <text x="570" y="665" font-family="Arial, sans-serif" font-size="10" fill="#333">• O(log n) Retrieval</text>
    <text x="570" y="685" font-family="Arial, sans-serif" font-size="10" fill="#333">• Persistent Index File</text>
    
    <!-- SQLite Database -->
    <rect x="850" y="540" width="250" height="160" fill="#f1f8e9" stroke="#689f38" stroke-width="2" rx="3"/>
    <text x="975" y="560" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#33691e">SQLite Database</text>
    <text x="975" y="580" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Metadata and Content</text>
    
    <!-- SQLite Tables -->
    <text x="870" y="605" font-family="Arial, sans-serif" font-size="10" fill="#333">memories table:</text>
    <text x="880" y="620" font-family="Arial, sans-serif" font-size="9" fill="#666">• id, content, timestamp</text>
    <text x="880" y="635" font-family="Arial, sans-serif" font-size="9" fill="#666">• metadata (JSON)</text>
    <text x="880" y="650" font-family="Arial, sans-serif" font-size="9" fill="#666">• vector_id (FAISS link)</text>
    
    <text x="870" y="670" font-family="Arial, sans-serif" font-size="10" fill="#333">reminders table:</text>
    <text x="880" y="685" font-family="Arial, sans-serif" font-size="9" fill="#666">• id, title, description, time</text>
  </g>
  
  <!-- Output Layer -->
  <g id="output-layer">
    <rect x="50" y="740" width="1100" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="5"/>
    <text x="600" y="765" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">OUTPUT LAYER</text>
    
    <!-- Output Types -->
    <rect x="150" y="775" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="225" y="797" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Chat Response</text>
    
    <rect x="350" y="775" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="425" y="797" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Daily Summary</text>
    
    <rect x="550" y="775" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="625" y="797" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Confirmations</text>
    
    <rect x="750" y="775" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="825" y="797" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Search Results</text>
    
    <rect x="950" y="775" width="150" height="35" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="1025" y="797" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Reminder Alerts</text>
  </g>
  
  <!-- Data Flow Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d32f2f"/>
    </marker>
  </defs>
  
  <!-- Flow Lines -->
  <!-- Input to Processing -->
  <line x1="600" y1="160" x2="600" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Processing to Agent -->
  <line x1="600" y1="280" x2="600" y2="300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Agent to Tools -->
  <line x1="600" y1="380" x2="600" y2="400" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Tools to Vector Storage -->
  <line x1="600" y1="480" x2="600" y2="500" stroke="#d32f2f" stroke-width="3" marker-end="url(#arrowhead-red)"/>
  
  <!-- Vector Storage to Output -->
  <line x1="600" y1="720" x2="600" y2="740" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Key Features Box -->
  <g id="key-features">
    <rect x="860" y="85" width="280" height="90" fill="#fffde7" stroke="#fbc02d" stroke-width="2" rx="5"/>
    <text x="1000" y="105" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#f57f17">Key Improvements</text>
    <text x="870" y="125" font-family="Arial, sans-serif" font-size="9" fill="#333">✓ Semantic search (meaning-based)</text>
    <text x="870" y="140" font-family="Arial, sans-serif" font-size="9" fill="#333">✓ Persistent storage (survives restarts)</text>
    <text x="870" y="155" font-family="Arial, sans-serif" font-size="9" fill="#333">✓ Fast retrieval (sub-second)</text>
    <text x="870" y="170" font-family="Arial, sans-serif" font-size="9" fill="#333">✓ Scalable (handles 1000s of memories)</text>
  </g>
  
  <!-- Data Flow Description -->
  <text x="50" y="850" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Data Flow:</text>
  <text x="50" y="870" font-family="Arial, sans-serif" font-size="10" fill="#666">
    1. Input → 2. Text Extraction/Processing → 3. Embedding Generation (384D vectors) → 4. FAISS Index Storage + SQLite Metadata →
  </text>
  <text x="50" y="885" font-family="Arial, sans-serif" font-size="10" fill="#666">
    5. Query Processing → 6. Vector Similarity Search → 7. Context Retrieval → 8. Response Generation
  </text>
</svg>